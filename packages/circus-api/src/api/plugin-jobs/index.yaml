name: PluginJobs
description: >
  Creates and manages CIRCUS CS Plug-in jobs.
routes:
  - verb: post
    path: /plugin-jobs
    description: >
      Creates a new plug-in job.
    requestSchema:
      type: object
      properties:
        pluginId:
          type: string
        series:
          type: array
          minItems: 1
          items:
            $ref: pluginJobSeries
        priority:
          type: integer
      required: ['pluginId', 'series']
    responseSchema:
      type: object
      properties:
        jobId:
          type: string
      required: ['jobId']
  - verb: patch
    path: /plugin-jobs/:jobId
    description: >
      Cancels an existing plug-in job.
  - verb: get
    path: /plugin-jobs
    handler: handleSearch
    description: >
      Performs search for the plug-in job.
    responseSchema:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: pluginJob
  - verb: get
    path: /plugin-jobs/:jobId
    description: >
      Returns the detail of the specified plug-in job.
    responseSchema: pluginJob
  - verb: post
    path: /plugin-jobs/:jobId/feedback
    description: >
      Creates a new feedback entry for the specified plug-in job.
    requestSchema: pluginJobFeedback|allRequiredExcept feedbackId,userEmail,createdAt
    handler: handlePostFeedback
  - verb: get
    path: /plugin-jobs/:jobId/feedback
    description: >
      Lists feedback entries for the specified plug-in job.
    responseSchema:
      type: array
      items:
        $ref: pluginJobFeedback
    handler: handleGetFeedback
